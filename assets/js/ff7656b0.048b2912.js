"use strict";(self.webpackChunkproxana_docs=self.webpackChunkproxana_docs||[]).push([[979],{383:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>q,contentTitle:()=>J,default:()=>P,frontMatter:()=>S,metadata:()=>r,toc:()=>W});const r=JSON.parse('{"id":"features/user-identification","title":"Authenticate Users","description":"There are a couple of ways to authenticate your application users with Proxana. The most common authentication method is to use a JWT (JSON Web Token) that is signed with a secret key. This allows you to verify the identity of the user without exposing any sensitive information.","source":"@site/docs/features/user-identification.md","sourceDirName":"features","slug":"/features/user-identification","permalink":"/docs/features/user-identification","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Features","permalink":"/docs/category/features"},"next":{"title":"Rate Limiting","permalink":"/docs/features/rate-limiting"}}');var i=t(4848),s=t(8453),a=t(6540),o=t(4164),l=t(5627),u=t(6347),c=t(372),d=t(604),h=t(1861),p=t(8749);function f(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return f(e).map((({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r})))}(t);return function(e){const n=(0,h.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m({value:e,tabValues:n}){return n.some((n=>n.value===e))}function j({queryString:e=!1,groupId:n}){const t=(0,u.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(r),(0,a.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})}),[r,t])]}function y(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,i=x(e),[s,o]=(0,a.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[l,u]=j({queryString:t,groupId:r}),[d,h]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,p.Dv)(n);return[t,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),f=(()=>{const e=l??d;return m({value:e,tabValues:i})?e:null})();(0,c.A)((()=>{f&&o(f)}),[f]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),h(e)}),[u,h,i]),tabValues:i}}var g=t(9136);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v({className:e,block:n,selectedValue:t,selectValue:r,tabValues:s}){const a=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.a_)(),c=e=>{const n=e.currentTarget,i=a.indexOf(n),o=s[i].value;o!==t&&(u(n),r(o))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=a.indexOf(e.currentTarget)+1;n=a[t]??a[0];break}case"ArrowLeft":{const t=a.indexOf(e.currentTarget)-1;n=a[t]??a[a.length-1];break}}n?.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},e),children:s.map((({value:e,label:n,attributes:r})=>(0,i.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{a.push(e)},onKeyDown:d,onClick:c,...r,className:(0,o.A)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function w({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===t));return e?(0,a.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function T(e){const n=y(e);return(0,i.jsxs)("div",{className:(0,o.A)("tabs-container",b.tabList),children:[(0,i.jsx)(v,{...n,...e}),(0,i.jsx)(w,{...n,...e})]})}function k(e){const n=(0,g.A)();return(0,i.jsx)(T,{...e,children:f(e.children)},String(n))}const I={tabItem:"tabItem_Ymn6"};function A({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,o.A)(I.tabItem,t),hidden:n,children:e})}const S={sidebar_position:2},J="Authenticate Users",q={},W=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"JWT (JSON Web Token)",id:"jwt-json-web-token",level:2},{value:"Header",id:"header",level:2}];function N(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"authenticate-users",children:"Authenticate Users"})}),"\n",(0,i.jsx)(n.p,{children:"There are a couple of ways to authenticate your application users with Proxana. The most common authentication method is to use a JWT (JSON Web Token) that is signed with a secret key. This allows you to verify the identity of the user without exposing any sensitive information."}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.p,{children:"Before you start, make sure you have the following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A proxy set up in Proxana. (See ",(0,i.jsx)(n.a,{href:"/docs/integration-guides/connect-openai",children:"Connecting to OpenAI"})," for an example.)"]}),"\n",(0,i.jsxs)(n.li,{children:["If using JWT:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"An existing authentication system in your application that can issue JWTs. (i.e., using auth providers like Auth0 or your own custom implementation.)"}),"\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.code,{children:"/.well-known/jwks.json"})," endpoint that serves the public keys for JWT verification. (Auth0 provides this automatically)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"jwt-json-web-token",children:"JWT (JSON Web Token)"}),"\n",(0,i.jsx)(n.p,{children:"To authenticate users with JWT, you can follow these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"View Your Proxy"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Go to the Proxana dashboard and click on the proxy you want to edit."}),"\n",(0,i.jsxs)(n.li,{children:["Under the ",(0,i.jsx)(n.strong,{children:"Security"})," section, enable ",(0,i.jsx)(n.strong,{children:"Identify your users"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Edit Your Proxy"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"JWT"})," as the placement for the user identifier."]}),"\n",(0,i.jsxs)(n.li,{children:["For the ",(0,i.jsx)(n.strong,{children:"User Claim Key"})," field, enter the claim key that contains the user identifier in your JWT. This is typically ",(0,i.jsx)(n.code,{children:"sub"})," (subject) or ",(0,i.jsx)(n.code,{children:"user_id"}),", depending on your authentication system."]}),"\n",(0,i.jsxs)(n.li,{children:["(Optional) For the ",(0,i.jsx)(n.strong,{children:"Group Claim Key"})," field, enter the claim key that contains the user group or role information. This can be used for authorization purposes.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If your group claim is an array, you can toggle the ",(0,i.jsx)(n.strong,{children:"As a list"})," option to treat it as a list of groups."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["For the ",(0,i.jsx)(n.strong,{children:"Issuer"})," field, enter the issuer URL of your JWT. This is typically the base URL of your authentication provider (e.g., ",(0,i.jsx)(n.code,{children:"https://your-auth-provider.com"}),"). The URL should expose the public keys for JWT verification at ",(0,i.jsx)(n.code,{children:"/.well-known/jwks.json"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Save"})," to update your proxy configuration."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You simply need to include the JWT in the ",(0,i.jsx)(n.code,{children:"Authorization"})," header of your requests to the Proxana proxy and Proxana will automatically verify the JWT and extract the user identifier and group information based on your configuration."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="JWT Payload Example"',children:'{\n  "sub": "user123",\n  "groups": ["admin", "editor"],\n  "iss": "https://your-auth-provider.com",\n  "iat": 1700000000,\n  "exp": 1700003600\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"header",children:"Header"}),"\n",(0,i.jsx)(n.p,{children:"If you're not using JWT, you can also authenticate users by passing a user identifier in the request headers. This is useful for simpler applications or when you don't have a JWT-based authentication system."}),"\n",(0,i.jsx)(n.admonition,{title:"Warning",type:"danger",children:(0,i.jsx)(n.p,{children:"This method is less secure than using JWTs, as it does not provide the same level of verification and integrity."})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"View Your Proxy"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Go to the Proxana dashboard and click on the proxy you want to edit."}),"\n",(0,i.jsxs)(n.li,{children:["Under the ",(0,i.jsx)(n.strong,{children:"Security"})," section, enable ",(0,i.jsx)(n.strong,{children:"Identify your users"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Edit Your Proxy"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Header"})," as the placement for the user identifier."]}),"\n",(0,i.jsxs)(n.li,{children:["For the ",(0,i.jsx)(n.strong,{children:"User Identifier"})," field, enter the name of the header that will contain the user identifier. This could be something like ",(0,i.jsx)(n.code,{children:"X-User-ID"})," or ",(0,i.jsx)(n.code,{children:"X-Auth-User"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["(Optional) For the ",(0,i.jsx)(n.strong,{children:"Group Identifier"})," field, enter the name of the header that will contain the user group or role information. This can be used for authorization purposes. This could be something like ",(0,i.jsx)(n.code,{children:"X-User-Group"})," or ",(0,i.jsx)(n.code,{children:"X-Auth-Group"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Save"})," to update your proxy configuration."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Now, when you make requests to the Proxana proxy, you can include the user identifier in the specified header. Proxana will automatically extract the user identifier and group information based on your configuration."}),"\n","\n",(0,i.jsxs)(k,{children:[(0,i.jsx)(A,{value:"js",label:"JavaScript",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// Example of making a request with user identifier in headers\nfetch('https://my-proxy123abc.proxana.dev/api/data', {\n    method: 'GET',\n    headers: {\n        'X-User-ID': 'user123', // Replace with actual user ID\n        'X-User-Group': 'admin' // Optional, replace with actual user group\n    }\n})\n"})})}),(0,i.jsx)(A,{value:"py",label:"Python",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"import requests\n\n# Example of making a request with user identifier in headers\nresponse = requests.get(\n    'https://my-proxy123abc.proxana.dev/api/data',\n    headers={\n        'X-User-ID': 'user123',  # Replace with actual user ID\n        'X-User-Group': 'admin'  # Optional, replace with actual user group\n    }\n)\n"})})}),(0,i.jsx)(A,{value:"dart",label:"Dart",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:http/http.dart' as http;\n\n// Example of making a request with user identifier in headers\nfinal response = await http.get(\n  Uri.parse('https://my-proxy123abc.proxana.dev/api/data'),\n  headers: {\n    'X-User-ID': 'user123', // Replace with actual user ID\n    'X-User-Group': 'admin' // Optional, replace with actual user group\n  },\n);\n"})})})]})]})}function P(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(N,{...e})}):N(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);