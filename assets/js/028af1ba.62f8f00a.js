"use strict";(self.webpackChunkproxana_docs=self.webpackChunkproxana_docs||[]).push([[436],{8364:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"features/rate-limiting","title":"Rate Limiting","description":"Proxana provides a powerful rate limiting feature that allows you to control the number of requests your application can make to the OpenAI API. This is particularly useful for managing costs and ensuring fair usage among users.","source":"@site/docs/features/rate-limiting.md","sourceDirName":"features","slug":"/features/rate-limiting","permalink":"/docs/features/rate-limiting","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Authenticate Users","permalink":"/docs/features/user-identification"},"next":{"title":"Integration Guides","permalink":"/docs/category/integration-guides"}}');var i=n(4848),s=n(8453);const l={sidebar_position:3},o="Rate Limiting",d={},a=[{value:"Different types of &quot;requests&quot;",id:"different-types-of-requests",level:3},{value:"Different types of rate-limite rules",id:"different-types-of-rate-limite-rules",level:3},{value:"1. Global Rate Limit:",id:"1-global-rate-limit",level:4},{value:"2. Anonymous Rate Limit:",id:"2-anonymous-rate-limit",level:4},{value:"3. Group Rate Limit:",id:"3-group-rate-limit",level:4},{value:"How to set up rate limiting",id:"how-to-set-up-rate-limiting",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Set up Rate Limiting",id:"set-up-rate-limiting",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"rate-limiting",children:"Rate Limiting"})}),"\n",(0,i.jsx)(t.p,{children:"Proxana provides a powerful rate limiting feature that allows you to control the number of requests your application can make to the OpenAI API. This is particularly useful for managing costs and ensuring fair usage among users."}),"\n",(0,i.jsx)(t.h3,{id:"different-types-of-requests",children:'Different types of "requests"'}),"\n",(0,i.jsx)(t.p,{children:"In Proxana, requests can be categorized into different types based on their authentication status and group membership. This allows you to apply different rate limits to different user types:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Authenticated request"}),": Has a ",(0,i.jsx)(t.strong,{children:"user identifier"})," (e.g., ",(0,i.jsx)(t.code,{children:"sub"})," value in ",(0,i.jsx)(t.strong,{children:"JWT"}),", or ",(0,i.jsx)(t.code,{children:"X-User-Id"})," value in ",(0,i.jsx)(t.strong,{children:"Header"}),")"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Authorized request"}),": Has a ",(0,i.jsx)(t.strong,{children:"group identifier"})," matching a defined group from the ",(0,i.jsx)(t.strong,{children:"group rate limit rules"}),". (e.g., ",(0,i.jsx)(t.code,{children:"pro"}),", ",(0,i.jsx)(t.code,{children:"premium"}),", etc.)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Anonymous request"}),": Does not have a user identifier or group identifier. This includes requests made by unauthenticated users."]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{title:"Note",type:"note",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Authorized"})," requests are a subset of ",(0,i.jsx)(t.strong,{children:"Authenticated"})," requests, meaning that all authorized requests are also authenticated, ",(0,i.jsx)("ins",{children:(0,i.jsx)(t.strong,{children:"but not all"})})," authenticated requests are authorized."]})}),"\n",(0,i.jsx)(t.p,{children:"Here's a matrix to help you understand which rate limit rules apply to each type of request:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Rate Limit Type"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Authenticated"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Authorized"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Anonymous"}),(0,i.jsx)(t.th,{children:"Notes"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"\ud83c\udf10 Global"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{children:"Applies at the proxy-level"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"\ud83e\udee5 Anonymous"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsxs)(t.td,{style:{textAlign:"center"},children:["\u2705",(0,i.jsx)("sup",{children:"*"})," / \ud83d\udeab"]}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"\ud83d\udc65 Group"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udeab"}),(0,i.jsx)(t.td,{})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"* Authorized requests are treated as anonymous if no group rule is defined for the group. In this case, they will be subject to the anonymous rate limit."}),"\n",(0,i.jsx)(t.p,{children:"Here's a matrix to help you understand how a request is categorized based on its authentication status and group membership:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Request Type"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"User Identifier"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Group Identifier"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Authenticated"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udeab"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Authorized"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Anonymous"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\u26a0\ufe0f"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Anonymous"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udeab"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udeab"})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"Legend:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"\u2705: Has the identifier"}),"\n",(0,i.jsx)(t.li,{children:"\ud83d\udeab: Does not have the identifier"}),"\n",(0,i.jsx)(t.li,{children:"\u26a0\ufe0f: Has the identifier, but not defined in the rate limit rules"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"different-types-of-rate-limite-rules",children:"Different types of rate-limite rules"}),"\n",(0,i.jsx)(t.p,{children:"Proxana supports several types of rate-limiting rules, which can be applied to your proxy:"}),"\n",(0,i.jsx)(t.h4,{id:"1-global-rate-limit",children:"1. Global Rate Limit:"}),"\n",(0,i.jsxs)(t.p,{children:["This rule applies to ",(0,i.jsx)(t.strong,{children:"all"})," requests made through the proxy, regardless of the user or group."]}),"\n",(0,i.jsx)(t.p,{children:"It is useful for setting a maximum number of requests per hour, day, week, or month for the entire application. This helps prevent abuse and manage costs effectively."}),"\n",(0,i.jsx)(t.h4,{id:"2-anonymous-rate-limit",children:"2. Anonymous Rate Limit:"}),"\n",(0,i.jsx)(t.p,{children:"This rule applies to requests made by users who are not authenticated or do not belong to any of the defined user groups."}),"\n",(0,i.jsx)(t.p,{children:"It is useful for limiting the number of requests from unauthenticated users, ensuring that they do not overwhelm the API or consume excessive resources."}),"\n",(0,i.jsx)(t.admonition,{title:"Warning",type:"warning",children:(0,i.jsx)(t.p,{children:"If disabled, requests from unauthenticated users will not be allowed."})}),"\n",(0,i.jsx)(t.h4,{id:"3-group-rate-limit",children:"3. Group Rate Limit:"}),"\n",(0,i.jsx)(t.p,{children:"This rule applies to requests made by users belonging to a specific group. Or all users if no group is specified."}),"\n",(0,i.jsx)(t.p,{children:"It allows you to set different rate limits for different user groups, enabling you to prioritize certain users or features."}),"\n",(0,i.jsxs)(t.p,{children:["For example, let's say we have three user groups: ",(0,i.jsx)(t.code,{children:"free"}),", ",(0,i.jsx)(t.code,{children:"pro"}),", and ",(0,i.jsx)(t.code,{children:"premium"}),". You can set different rate limits for each group as follows:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Group"}),": ",(0,i.jsx)(t.code,{children:"*"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Limit"}),": ",(0,i.jsx)(t.em,{children:"10"})," ",(0,i.jsx)(t.strong,{children:"req/day"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Group"}),": ",(0,i.jsx)(t.code,{children:"pro"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Limit"}),": ",(0,i.jsx)(t.em,{children:"100"})," ",(0,i.jsx)(t.strong,{children:"req/day"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Group"}),": ",(0,i.jsx)(t.code,{children:"premium"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Limit"}),": ",(0,i.jsx)(t.em,{children:"1000"})," ",(0,i.jsx)(t.strong,{children:"req/day"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.admonition,{title:"Info",type:"info",children:(0,i.jsxs)(t.p,{children:["Users who do not belong to any group will be treated as anonymous users and subject to the anonymous rate limit. Unless the catch-all group ",(0,i.jsx)(t.code,{children:"*"})," is defined, which will apply to all users not in any other group."]})}),"\n",(0,i.jsxs)(t.p,{children:["In the above example, users in the ",(0,i.jsx)(t.code,{children:"pro"})," group can make 100 requests per day, while users in the ",(0,i.jsx)(t.code,{children:"premium"})," group can make 1000 requests per day. All other users (including ",(0,i.jsx)(t.code,{children:"free"}),") will be limited to 10 requests per day."]}),"\n",(0,i.jsx)(t.h2,{id:"how-to-set-up-rate-limiting",children:"How to set up rate limiting"}),"\n",(0,i.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(t.p,{children:"Before you start, make sure you have the following:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["A proxy set up in Proxana. (See ",(0,i.jsx)(t.a,{href:"/docs/integration-guides/connect-openai",children:"Connecting to OpenAI"})," for an example.)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Identify your users"})," is enabled in your proxy settings. This is necessary for group rate limiting to work. (See ",(0,i.jsx)(t.a,{href:"/docs/features/user-identification",children:"Authenticate Users"})," for more details.)"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"set-up-rate-limiting",children:"Set up Rate Limiting"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"View Your Proxy"}),":","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Go to the Proxana dashboard and click on the proxy you want to edit."}),"\n",(0,i.jsxs)(t.li,{children:["Under the ",(0,i.jsx)(t.strong,{children:"Security"})," section, enable ",(0,i.jsx)(t.strong,{children:"Rate Limiting"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Edit Your Proxy"}),":","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Enable the type of rate limiting you want to enforce."}),"\n",(0,i.jsxs)(t.li,{children:["For ",(0,i.jsx)(t.strong,{children:"Global Rate Limit"}),", enter the maximum number of requests allowed per hour, day, week, or month."]}),"\n",(0,i.jsxs)(t.li,{children:["For ",(0,i.jsx)(t.strong,{children:"Anonymous Rate Limit"}),", enter the maximum number of requests allowed per hour, day, week, or month for anonymous requests."]}),"\n",(0,i.jsxs)(t.li,{children:["For ",(0,i.jsx)(t.strong,{children:"Group Rate Limit"}),", enter the group identifier you want to apply the rate limit to and enter the maximum number of requests allowed per hour, day, week, or month for that group. You can add multiple groups with different limits. You can also use ",(0,i.jsx)(t.code,{children:"*"})," as a catch-all group to apply the rate limit to all users not in any other group."]}),"\n",(0,i.jsxs)(t.li,{children:["Click ",(0,i.jsx)(t.strong,{children:"Save"})," to update your proxy configuration."]}),"\n"]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var r=n(6540);const i={},s=r.createContext(i);function l(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);